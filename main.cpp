#include <stdio.h>
#include <stdlib.h>	 // rand, srand
#include <time.h>	 // time
#include <Windows.h> // Sleep関数

///===================================================================///
/// 							main.cpp
///===================================================================///

///----------------------------------------------------///
///						関数宣言
///----------------------------------------------------///

///====================結果を待って表示するコールバック関数====================///
/// NOTE: この関数は3秒待ってから正解かどうかを表示する
void ResultCallback(int dice, int result, int guess) {
	printf("\n結果発表...\n");
	// 3秒待つ
	Sleep(3000);
	// 結果発表
	printf("サイコロの目は %d です。\n", dice);  // サイコロの目を出力
	if (result == guess) {
		printf("正解です！\n");
	} else {
		printf("不正解です。\n");
	}
}

///====================サイコロを振る関数====================///
/// NOTE: サイコロを振って奇数か偶数かを返す（1: 奇数, 0: 偶数）
int RollDice(int* dice) {

	// 1から6までのランダムな数
	*dice = ( rand() % 6 ) + 1;
	//printf("サイコロの目は %d です。\n", *dice);

	// 奇数なら1、偶数なら0
	return ( *dice % 2 == 0 ) ? 0 : 1;
}

///====================ゲームの処理を行う関数====================///
/// NOTE: プレイヤーの予想を受け取り、結果を判定する
void PlayGame(void ( *callback )( int, int, int )) {
	int guess;

	// プレイヤーの入力を受付ける
	printf("奇数(1)か偶数(0)を予想してください: ");
	scanf_s("%d", &guess);

	// サイコロを振る
	int dice;
	int result = RollDice(&dice);

	// コールバック関数で結果を判定する
	callback(dice, result, guess);
}

///----------------------------------------------------///
///					変数の宣言・初期化
///----------------------------------------------------///



///===================================================================///
///							メイン処理
///===================================================================///
int main() {

	///----------------utf-8に設定----------------///
	SetConsoleOutputCP(65001);


	///----------------ゲーム処理----------------///
	// 乱数の種を設定
	srand(time(0));
	// ゲームを開始
	PlayGame(ResultCallback);


	///----------------終了処理----------------///
	return 0;
}
